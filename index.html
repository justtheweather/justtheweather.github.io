<!-- created by Ben Fields, licensed under MIT. -->
<!DOCTYPE html>
<html>
<head>
  <title>Just the Weather</title>
  <meta name="theme-color" content="#eceff1">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="A simple location based weather map for the modern web. " >

  
  <style>
  body{

		font-family: 'Roboto', sans-serif;
     text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -webkit-text-size-adjust: none;
    -moz-text-size-adjust: none;
  	font-size: 1em; 
    font-weight: 300;
		color: black;
		text-align: center;
		background-color: #ffffff;

}

.footer {
  bottom: 0;
  left: 0;
  right: 0;
  position: absolute;
  display: block;
  background-color: #f2f2f2;
  border-top: 1px solid #e4e4e4;
  font-size: small;
}

/* some handy classes */
a{
    color: #999;
}
a:hover{
    color: #FFC107;
}
.grey{
  color: #999;
}
.is-center{
  text-align: center;
}
.shadow{
      -webkit-box-shadow: 0px 2px 5px -0px rgba(0,0,0,0.3);
         -moz-box-shadow: 0px 2px 5px -0px rgba(0,0,0,0.3);
              box-shadow: 0px 2px 5px -0px rgba(0,0,0,0.3);
}
.transition{
   transition: all .5s cubic-bezier(.3, 0, 0, 1.3)
}




/* will try to integrate flickr api */
#img{
    background:url(http://kristenvonbargen.com/wp-content/uploads/2013/11/camp.jpg) center no-repeat;
    height: 10em;
}

	
#weather{
		background-color: white;

    font-family: 'Roboto', sans-serif;
     text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -webkit-text-size-adjust: none;
    -moz-text-size-adjust: none;
    font-size: 0.9em; 
    font-weight: 400;
		color: #333;
		text-align: left;

    padding: auto;
    height: auto;
		border-bottom: 0.1em solid #eee;

    cursor: pointer;

}


	
.content {
  margin-left: auto;
	margin-right: auto;
	margin-top: 4em;

	max-width: 25em;

	background-color: white;

	transition: all 0.5s;
}


#find-wrapper{
  cursor: pointer;
  color: #999;
  padding-right: 2em;

}

#find-wrapper:hover{
  color: #333;

}




/* RIPPLE */
.ripplelink{
  font-family: 'Roboto', sans-serif;
  font-size: 0.8em; 
  font-weight: 400;
  color: #999;


  display:block;
  text-align:right;
  text-decoration:none;
  position:relative;
  overflow:hidden;
  -webkit-transition: all 0.2s ease;
  -moz-transition: all 0.2s ease;
  -o-transition: all 0.2s ease;
  transition: all 0.2s ease;
  z-index:0;

  width: 100%;

  letter-spacing: 0.1em;

  padding: 1em;
  padding-right: 2em;
}


.ink {
  display: block;
  position: absolute;
  background:rgba(0, 0, 0, 0.1);
  border-radius: 100%;
  -webkit-transform:scale(0);
     -moz-transform:scale(0);
       -o-transform:scale(0);
          transform:scale(0);
}

.animate {
	-webkit-animation:ripple 0.65s linear;
   -moz-animation:ripple 0.65s linear;
    -ms-animation:ripple 0.65s linear;
     -o-animation:ripple 0.65s linear;
        animation:ripple 0.65s linear;
}

@-webkit-keyframes ripple {
    100% {opacity: 0; -webkit-transform: scale(2.5);}
}
@-moz-keyframes ripple {
    100% {opacity: 0; -moz-transform: scale(2.5);}
}
@-o-keyframes ripple {
    100% {opacity: 0; -o-transform: scale(2.5);}
}
@keyframes ripple {
    100% {opacity: 0; transform: scale(2.5);}
}




  </style>
</head>
<body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42557789-5', 'auto');
  ga('send', 'pageview');

</script>
<br>
<h1>Just the Weather</h1> 
<label style="color: grey;">Hover results for full forcast.</label>
<div class="pure-g content shadow">

     		<div class="pure-u-1">
        		<div id="weather" class = "transition">
          </div> 
          
     		</div>
     <div class = "is-center ripplelink js-geolocation is-center" id = "find-wrapper">
	       <p class = "find-text"> Find Me <i class="fa fa-map-marker"></i> </p>
     </div>  

  </div>
<div class="footer">
<p>Created by Ben Fields. &copy; 2015.</p>
</div>

<script>
	loadWeather('#',''); //@params location, woeid
	setInterval(loadWeather, 60000000);

	var findClicked = false;

	/* Does your browser support geolocation? */
	if ("geolocation" in navigator) {
	  $('.js-geolocation').show(); 
	} else {
	  $('.js-geolocation').hide();
	}
	
	/* Where in the world are you? */
	$('.js-geolocation').on('click', function() {
	
		if(findClicked == false)
		{
			findClicked = true;
			$('#find-wrapper').html('<p> Finding You <i class="fa fa-map-marker"></i> </p>');
		
				$('#weather').html("");
				$('#weather').css('padding-top', '0em');
				$('#weather').css('padding-bottom', '0em');
				$('#weather').css('height', '0.1em');
				$('#img').css('height', '20em');
		
		
		
			  navigator.geolocation.getCurrentPosition(function(position) 
			  {
			  	//load weather using your lat/lng 	coordinates
			    loadWeather(position.coords.latitude+','+position.coords.longitude);    
			  });
		}
	});



	//thank you James Fleeting for this awesome API!
	// Docs at http://simpleweatherjs.com
	function loadWeather(location, woeid) {
	  $.simpleWeather({
	    location: location,
	    woeid: woeid,
	    unit: 'f',
	    success: function(weather) {

	      html = '<p>'+ weather.city+', '+weather.region+'</p>';
	      html += '<h2> <i class="icon-'+ weather.code+'"></i> '
              +  weather.temp+'&deg;'+weather.units.temp+'</h2>';
	      html += '<p class="currently">'+weather.currently+'</p>';
	     
	 
		 $('#weather').hover( 


		 	function(){

	  			$('#weather').css('height', '14em');
	  			$('#img').css('height', '1em');
	  			html = '<p>'+ weather.city+', '+weather.region+'</p>';

	  			for(var i=0;i<weather.forecast.length;i++) {

        			    html += '<p>'+ weather.forecast[i].day+ ' : <strong> ' + weather.forecast[i].high + '     </strong> <span class = "grey">' + weather.forecast[i].low + '</span> </p>';

        				$("#weather").html(html);
      			  }
      		},


      		function(){

      			$('#weather').css('height', '8em');
	  			$('#img').css('height', '10em');

      			html = '<p>'+ weather.city+', '+weather.region+'</p>';
	     	    html += '<h2> <i class="icon-'+ weather.code+'"></i> '+ weather.temp+'&deg;'+weather.units.temp+'</h2>';
	            html += '<p class="currently">'+weather.currently+'</p>';
	            $("#weather").html(html);


      		});
		  

		  if(findClicked == true)
		  {
		  	 $('#find-wrapper').html('<p> Found You! <i class="fa fa-map-marker"></i> </p>');
		  }

		  $('#weather').css('padding', '2em');
		  $('#weather').css('height', '8em');
		  $('#img').css('height', '10em');
	     	
	     	setTimeout( function(){$("#weather").html(html);}, 200);
	     
	    },
	    error: function(error) {
	      $("#weather").html('<p>'+error+'</p>');
	    }
	  });
	}



	//ripple on click effect, big thanks to 440 design here on codepen for this
  //check it out here  http://codepen.io/440design/pen/iEztk
	$(function(){
		var ink, d, x, y;
	
		$(".ripplelink").click(function(e){
	
	   		 if($(this).find(".ink").length === 0){
	   		     $(this).prepend("<span class='ink'></span>");
	   		 }
	         
	   		 ink = $(this).find(".ink");
	   		 ink.removeClass("animate");
	   	  
	   		 if(!ink.height() && !ink.width()){
	    	    d = Math.max($(this).outerWidth(), $(this).outerHeight());
	    	    ink.css({height: d, width: d});
	  	     }
	     
	  		 x = e.pageX - $(this).offset().left - ink.width()/2;
	  		 y = e.pageY - $(this).offset().top - ink.height()/2;
	     
	   		 ink.css({top: y+'px', left: x+'px'}).addClass("animate");
	
			});
		});
	
</script>
</body>
</html>
